/*
* shuffleboard: A jQuery plugin to create a Shuffleboard UI component
*
* Limitations:
* - requires jquery.transform.light.js (https://github.com/louisremi/jquery.transform.js) for rotation to work.
*
* Latest version and complete README available on Github:
* https://github.com/rehandalal/shuffleboard
*
* Copyright 2011 Rehan Dalal
* Licensed under the MIT license.
*
*/
(function(a){var b={create:function(b){var c={autoStart:!0,animateRotation:!0,corner:"nearest",direction:"back",easing:"swing",interval:1e3,maxRotation:30,scatter:!0,rotate:!1,speed:1e3,tag:"img"};return b&&a.extend(c,b),this.each(function(){var b=a(this),d=b.data("shuffleboard");d||b.data("shuffleboard",c),b.css({position:"relative"}),b.children(c.tag).each(function(){a(this).css({position:"absolute"})}),b.shuffleboard("reindex"),c.scatter&&b.shuffleboard("scatter"),c.autoStart&&b.shuffleboard("start")})},destroy:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");b.shuffleboard("stop"),a(window).unbind(".shuffleboard"),c.shuffleboard.remove(),b.removeData("shuffleboard")})},reindex:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");b.children(c.tag).each(function(b){a(this).css({zIndex:b+1})})})},scatter:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");b.children(c.tag).each(function(){var d=parseInt(b.css("paddingLeft"))+Math.floor(Math.random()*(b.width()-a(this).outerWidth()+1)),e=parseInt(b.css("paddingTop"))+Math.floor(Math.random()*(b.height()-a(this).outerHeight()+1));a(this).css({left:d+"px",top:e+"px"});if(c.rotate){var f=Math.floor(Math.random()*(c.maxRotation*2+1))-c.maxRotation;a(this).css({transform:"rotate("+f+"deg)"})}})})},shuffle:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard"),d=c.direction=="front"?b.children(c.tag).first():b.children(c.tag).last(),e,f;c.scatter?(e=parseInt(b.css("paddingLeft"))+Math.floor(Math.random()*(b.width()-d.outerWidth()+1)),f=parseInt(b.css("paddingTop"))+Math.floor(Math.random()*(b.height()-d.outerHeight()+1))):(e=parseInt(d.css("paddingLeft")),f=parseInt(d.css("paddingTop")));var g={},h={};switch(c.corner){case"topleft":h={top:-d.outerHeight()+"px",left:-d.outerWidth()+"px"};break;case"topright":h={top:-d.outerHeight()+"px",left:b.outerWidth()+"px"};break;case"bottomright":h={top:b.outerHeight()+"px",left:b.outerWidth()+"px"};break;case"bottomleft":h={top:b.outerHeight()+"px",left:-d.outerWidth()+"px"};break;default:var i=[parseInt(d.css("left"))+d.outerWidth()/2,parseInt(d.css("top"))+d.outerHeight()/2],j=[b.outerWidth()/2,b.outerHeight()/2];i[0]<j[0]?h.left=-d.outerWidth()+"px":h.left=b.outerWidth()+"px",i[1]<j[1]?h.top=-d.outerHeight()+"px":h.top=b.outerHeight()+"px"}a.extend(g,h),c.rotate&&c.animateRotation&&a.extend(g,{transform:"rotate(0deg)"}),d.animate(g,c.speed/2,c.easing,function(){a(this).css("zIndex",c.direction=="front"?b.children(c.tag).length+1:0);var d={top:f+"px",left:e+"px"};if(c.rotate&&c.animateRotation){var g=Math.floor(Math.random()*(c.maxRotation*2+1))-c.maxRotation;a.extend(d,{transform:"rotate("+g+"deg)"})}a(this).animate(d,c.speed/2,c.easing,function(){c.direction=="front"?b.append(a(this).clone()):b.prepend(a(this).clone()),a(this).remove(),b.shuffleboard("reindex"),c._started&&b.shuffleboard("start")})})})},start:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");c._started=!0,c._timeout=setTimeout(function(){b.shuffleboard("shuffle")},c.interval)})},stop:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");c._started=!1,c._timeout&&clearTimeout(c._timeout)})},toggle:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");b.shuffleboard(c._started?"stop":"start")})}};a.fn.shuffleboard=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.create.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.shuffleboard")}})(jQuery)