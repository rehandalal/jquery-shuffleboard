/*
* shuffleboard: A jQuery plugin to create a Shuffleboard UI component
*
* Limitations:
* - requires jquery.transform.light.js (https://github.com/louisremi/jquery.transform.js) for rotation to work.
*
* Latest version and complete README available on Github:
* https://github.com/rehandalal/shuffleboard
*
* Copyright 2011 Rehan Dalal
* Licensed under the MIT license.
*
*/
(function(a){var b={create:function(b){var c={autoStart:!0,direction:"back",easing:"swing",interval:1e3,randomize:!0,speed:1e3,tag:"img"};return b&&a.extend(c,b),this.each(function(){var b=a(this),d=b.data("shuffleboard");d||b.data("shuffleboard",c),b.css({position:"relative"}),b.children(c.tag).each(function(){a(this).css({position:"absolute"})}),b.shuffleboard("reindex"),c.randomize&&b.shuffleboard("scatter"),c.autoStart&&b.shuffleboard("start")})},destroy:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");b.shuffleboard("stop"),a(window).unbind(".shuffleboard"),c.shuffleboard.remove(),b.removeData("shuffleboard")})},reindex:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");b.children(c.tag).each(function(b){a(this).css({zIndex:b+1})})})},scatter:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");b.children(c.tag).each(function(){var c=parseInt(b.css("paddingLeft"))+Math.floor(Math.random()*(b.width()-a(this).outerWidth()+1)),d=parseInt(b.css("paddingTop"))+Math.floor(Math.random()*(b.height()-a(this).outerHeight()+1));a(this).css({left:c+"px",top:d+"px"})})})},shuffle:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard"),d=c.direction=="front"?b.children(c.tag).first():b.children(c.tag).last();if(c.randomize)var e=parseInt(b.css("paddingLeft"))+Math.floor(Math.random()*(b.width()-d.outerWidth()+1)),f=parseInt(b.css("paddingTop"))+Math.floor(Math.random()*(b.height()-d.outerHeight()+1));else var e=0,f=0;d.animate({top:b.outerHeight()+"px",left:b.outerWidth()+"px"},c.speed/2,c.easing,function(){a(this).css("zIndex",c.direction=="front"?b.children(c.tag).length+1:0),a(this).animate({top:f+"px",left:e+"px"},c.speed/2,c.easing,function(){c.direction=="front"?b.append(a(this).clone()):b.prepend(a(this).clone()),a(this).remove(),b.shuffleboard("reindex"),c._started&&b.shuffleboard("start")})})})},start:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");c._started=!0,c._timeout=setTimeout(function(){b.shuffleboard("shuffle")},c.interval)})},stop:function(){return this.each(function(){var b=a(this),c=b.data("shuffleboard");c._started=!1,c._timeout&&clearTimeout(c._timeout)})}};a.fn.shuffleboard=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.create.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.shuffleboard")}})(jQuery)